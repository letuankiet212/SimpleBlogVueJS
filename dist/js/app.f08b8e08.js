(function(){"use strict";var t={9519:function(t,e,a){a.d(e,{Z:function(){return c}});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-default mx-auto mt-5"},[a("div",{attrs:{id:"wrapper"}},[t._t("default")],2)])},n=[],i={name:"layout-default"},s=i,r=a(1001),l=(0,r.Z)(s,o,n,!1,null,null,null),c=l.exports},8991:function(t,e,a){var o=a(8935),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view"),a("div",{staticClass:"loading-page",class:t.isLoading?"":"hidden"},[t._m(0)]),a("toast-component")],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress-bar"},[a("div",{staticClass:"progress-content"})])}],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-fixed bottom-0 end-0 p-3",staticStyle:{"z-index":"11"}},[a("div",{staticClass:"toast show",attrs:{id:"liveToast"}},[t._m(0),a("div",{staticClass:"toast-body",domProps:{innerHTML:t._s(t.msg)}})])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toast-header"},[a("strong",{staticClass:"me-auto"},[t._v("Notification")]),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"toast","aria-label":"Close"}})])}],l={name:"toast-component",data:()=>({msg:"Loading..."}),mounted(){this.$eventBus.$on("SEND_MSG",(t=>{this.msg=t}))}},c=l,d=a(1001),u=(0,d.Z)(c,s,r,!1,null,null,null),g=u.exports,m={components:{ToastComponent:g},data:()=>({toggle:!1}),computed:{isLoading(){return this.$store.state.isLoading}},mounted(){this.toggle=!0}},h=m,p=(0,d.Z)(h,n,i,!1,null,null,null),f=p.exports,v=a(2809),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("layout-default",[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("Navbar",{on:{searchData:t.searchBlog}})],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"card my-3 shadow bg-body rounded row"},[a("div",{staticClass:"card-body col-12"},[a("div",{staticClass:"row flex-between-center align-items-center"},[t.infoPage?a("p",{staticClass:"col-12 col-md-3"},[t._v(" Showing "+t._s(t.infoPage.from+"-"+t.infoPage.to)+" of "+t._s(t.infoPage.count)+" Blogs ")]):t._e(),a("div",{staticClass:"col-12 col-md-5 pagination justify-content-center"},[a("PaginationComponent",{attrs:{infoPage:t.infoPage},on:{updatePag:t.updatePag}})],1),a("div",{staticClass:"col-12 col-md-4 d-flex align-items-center"},[a("p",{staticClass:"w-25"},[t._v("Sort by:")]),a("SelectComponent",{attrs:{listSort:t.listSort},on:{updateSort:t.updateSort}})],1)])])])]),a("div",{staticClass:"container card",attrs:{id:"list-blogs"}},[t.listBlogs.length>0&&!t.isLoading?a("div",{staticClass:"p-3 shadow bg-body rounded row"},[a("blog-add"),t._l(t.listBlogs,(function(t,e){return a("div",{key:"blog"+e,staticClass:"col-12 col-md-6 col-lg-4 mb-5"},[a("blog-component",{attrs:{blog:t}})],1)}))],2):a("div",{staticClass:"p-3 shadow bg-body rounded row"},t._l(6,(function(t){return a("div",{key:"placeHolderShimmer"+t,staticClass:"col-12 col-md-6 col-lg-4 mb-5"},[a("div",{staticClass:"animated-background blog-img"}),a("div",{staticClass:"card-body border"},[a("h5",{staticClass:"card-title animated-background"}),a("p",{staticClass:"card-text animated-background"})])])})),0)])])},B=[],_=a(9519),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"d-flex"},t._l(t.fetchPageNumber,(function(e,o){return a("li",{key:"page"+o,staticClass:"page-item",class:o+1===t.infoPage.page?"active":""},[a("a",{staticClass:"page-link",on:{click:function(a){return t.handleClick(e)}}},[t._v(t._s(e))])])})),0)},y=[];const w=(t,e,a=1)=>{let o=t;const n=[];while(o<=e)n.push(o),o+=a;return n};var E={name:"PaginationComponent",methods:{range:w,handleClick(t){let e=this.infoPage.page;switch(t){case">":e+=1;break;case"<":e-=1;break;default:e=t;break}this.$emit("updatePag",e)}},computed:{fetchPageNumber(){if(this.infoPage){const{pages:t,page:e}=this.infoPage,a=1,o=2*a+3,n=o+2;let i=null;if(t>n){const t=Math.max(2,e-a),o=Math.min(n-1,e+a);let n=this.range(t,o);const s=t>2,r=n-o>1;switch(!0){case s&&!r:n=["<",...n];break;case!s&&r:n=[...n,">"];break;case s&&r:default:n=["<",...n,">"];break}i=[1,...n,n]}else i=this.range(1,t);return i}return!1}},props:["infoPage"]},L=E,P=(0,d.Z)(L,C,y,!1,null,null,null),S=P.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentSelect,expression:"currentSelect"}],staticClass:"form-select flex-grow-1",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentSelect=e.target.multiple?a:a[0]},function(e){return t.handleChange()}]}},t._l(t.listSort,(function(e,o){return a("option",{key:"type-select"+o,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])})),0)},x=[],k={name:"SelectComponent",props:["listSort"],data:()=>({currentSelect:"created_at"}),methods:{handleChange(){this.$emit("updateSort",this.currentSelect)}}},T=k,D=(0,d.Z)(T,$,x,!1,null,null,null),N=D.exports,O=a(1045),Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg"},[a("div",{staticClass:"d-flex"},[a("h2",{staticClass:"navbar-brand"},[t._v("Vuejs")]),a("div",{staticClass:"dropdown"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"form-control me-2 btn border dropdown-toggle bg-white",class:t.toggleResult?"show":"",attrs:{type:"search",placeholder:"Search"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])])])},A=[],G={name:"nav-bar",data:()=>({searchValue:"",toggleResult:!1}),watch:{searchValue(){this.$emit("searchData",this.searchValue)}}},j=G,U=(0,d.Z)(j,Z,A,!1,null,null,null),M=U.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-md-6 col-lg-4 mb-5"},[a("form",{staticClass:"card shadow",on:{submit:function(e){return e.preventDefault(),t.handleSubmit()}}},[a("img",{staticClass:"blog-img",attrs:{src:t.formBlog.imagePreview,alt:""}}),a("div",{staticClass:"card-body"},[a("input",{staticClass:"p-1",attrs:{type:"file",name:"imageBlog",id:"imageBlog"},on:{change:t.handleUpload}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formBlog.nameBlog,expression:"formBlog.nameBlog"}],staticClass:"border mb-1 p-1",attrs:{type:"text",id:"titleBlog",placeholder:"Title Blog",required:""},domProps:{value:t.formBlog.nameBlog},on:{input:function(e){e.target.composing||t.$set(t.formBlog,"nameBlog",e.target.value)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formBlog.contentBlog,expression:"formBlog.contentBlog"}],staticClass:"border p-1",attrs:{id:"contentBlog"},domProps:{value:t.formBlog.contentBlog},on:{input:function(e){e.target.composing||t.$set(t.formBlog,"contentBlog",e.target.value)}}}),a("button",{staticClass:"btn btn-primary mt-2 mx-auto d-block",attrs:{type:"submit"}},[t._v("Add Blog")])])])])},F=[];const I=t=>{const e=t.target.files||t.dataTransfer.files;if(e.length)return URL.createObjectURL(e[0])};var q={name:"blog-add",mixins:[O.b],data:()=>({formBlog:{nameBlog:"My Blog",contentBlog:"My Blog",imagePreview:"https://api-placeholder.herokuapp.com/images/fallback/default.png",imageFileBlog:null}}),methods:{previewImgUpload:I,handleUpload(t){this.formBlog.imageFileBlog=t.target.files[0]||t.dataTransfer.files[0],this.formBlog.imagePreview=this.previewImgUpload(t)},handleSubmit(){const{nameBlog:t,contentBlog:e,imageFileBlog:a}=this.formBlog,o=new FormData;o.append("blog[image]",a),o.append("blog[title]",t),o.append("blog[content]",e),this.CreateBlog(o)}}},R=q,H=(0,d.Z)(R,V,F,!1,null,null,null),X=H.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("img",{staticClass:"card-img-top blog-img",attrs:{src:t.form.image,alt:t.form.title}}),t.isEdit?a("div",{staticClass:"card-body"},[a("input",{staticClass:"p-1",attrs:{type:"file",name:"imageBlog",id:"imageBlog"},on:{change:t.handleUpload}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formEdit.nameBlog,expression:"formEdit.nameBlog"}],staticClass:"border mb-1 p-1",attrs:{type:"text",id:"titleBlog"},domProps:{value:t.formEdit.nameBlog},on:{input:function(e){e.target.composing||t.$set(t.formEdit,"nameBlog",e.target.value)}}}),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formEdit.contentBlog,expression:"formEdit.contentBlog"}],staticClass:"border p-1",attrs:{id:"contentBlog"},domProps:{value:t.formEdit.contentBlog},on:{input:function(e){e.target.composing||t.$set(t.formEdit,"contentBlog",e.target.value)}}}),a("div",{staticClass:"grp-button d-flex justify-content-between align-items-center mt-2"},[a("div",[a("div",{staticClass:"btn btn-primary",on:{click:function(e){return t.handleConfirm(t.blog.id)}}},[t._v("Submit")]),a("div",{staticClass:"btn btn-primary",on:{click:function(e){return t.handleCancel()}}},[t._v("Cancel")])]),a("div",{staticClass:"btn btn-primary",on:{click:function(e){return t.handleDel(t.blog.id)}}},[t._v("Delete")])])]):a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(t.form.title))]),a("p",{staticClass:"card-text"},[t._v(" "+t._s(t.form.content)+" ")]),a("div",{staticClass:"btn btn-primary mt-2",on:{click:function(e){return t.handleEdit()}}},[t._v("Edit")])])])},W=[],Y={name:"blog-component",props:["blog"],mixins:[O.b],data:()=>({isEdit:!1,form:{title:"",content:"",image:""},formEdit:{nameBlog:"",contentBlog:"",imageFileBlog:null}}),created(){this.fillData({title:this.blog.title,content:this.blog.content,image:this.blog.image.url})},methods:{fillData(t){this.form=Object.assign({},t)},handleEdit(){this.isEdit=!0,this.formEdit={nameBlog:this.form.title,contentBlog:this.form.content}},handleUpload(t){this.formEdit.imageFileBlog=t.target.files[0]||t.dataTransfer.files[0]},handleConfirm(t){const{nameBlog:e,contentBlog:a,imageFileBlog:o}=this.formEdit,n=new FormData;n.append("blog[title]",e),n.append("blog[content]",a),n.append("blog[image]",o),this.EditBlog(t,n),this.isEdit=!1},handleDel(t){console.log(t),confirm("You sure want delete this Blog ?")&&(this.isEdit=!1,this.DeleteBlog(t))}},mounted(){this.$eventBus.$on("UPDATE_BLOG",(t=>(t.id==this.blog.id&&this.fillData({title:t.title,content:t.content,image:t.image.url}),!1)))},watch:{blog(){this.fillData({title:this.blog.title,content:this.blog.content,image:this.blog.image.url})}}},J=Y,K=(0,d.Z)(J,z,W,!1,null,null,null),Q=K.exports,tt={name:"HomeView",components:{LayoutDefault:_.Z,PaginationComponent:S,SelectComponent:N,Navbar:M,BlogAdd:X,BlogComponent:Q},mixins:[O.b],data:()=>({sortValue:1,listBlogs:[],listSort:[{name:"Newest",value:"created_at"},{name:"ID",value:"id"},{name:"Title",value:"title"},{name:"Content",value:"content"},{name:"Update",value:"updated_at"}],sort_by:"created_at",search:""}),created(){this.GetBlogs({page:this.page,sort_by:this.sort_by,sort_direction:"desc"})},methods:{handleChange(){switch(this.sortValue){case"2":this.listBlogs.sort(((t,e)=>t.title.localeCompare(e.title)));break;case"1":default:this.listBlogs.sort(((t,e)=>e.created_at.localeCompare(t.created_at)));break}},updatePag(t){this.GetBlogs({page:t,sort_by:this.sort_by,search:this.search})},searchBlog(t){this.search=t,this.GetBlogs({search:this.search,sort_by:this.sort_by})},updateSort(t){this.sort_by=t,this.GetBlogs({page:this.page,sort_by:this.sort_by,search:this.search})}},mounted(){this.$eventBus.$on("UPDATE_LIST_BLOGS",(t=>{console.log("ello"),this.listBlogs=t}))},computed:{page(){const{infoPage:t}=this;return t?t.page:1},infoPage(){const{pag:t}=this.$store.state.Blogs;return void 0!=typeof t&&t}}},et=tt,at=(0,d.Z)(et,b,B,!1,null,null,null),ot=at.exports;o.Z.use(v.Z);const nt=[{path:"/",name:"home",component:ot},{path:"/blog-detail/:id",name:"Blog Detail",component:()=>a.e(320).then(a.bind(a,7320))}],it=new v.Z({mode:"history",base:"/",routes:nt});var st=it,rt=a(4665);const lt={listBlogs:[],pag:null},ct={UPDATE_LIST_BLOGS(t,e){t.listBlogs=e},UPDATE_PAG(t,e){t.pag=e}},dt={};var ut={namespaced:!0,state:lt,mutations:ct,actions:dt};o.Z.use(rt.ZP);var gt=new rt.ZP.Store({state:{isLoading:!1},getters:{},mutations:{updateLoadingState(t,e){t.isLoading=e}},actions:{onLoading(t,e){t.commit("updateLoadingState",e)}},modules:{Blogs:ut}});const mt=document.querySelector.bind(document),ht=document.querySelectorAll.bind(document),pt=new o.Z;o.Z.prototype.$eventBus=pt,o.Z.prototype.$=mt,o.Z.prototype.$$=ht,o.Z.config.productionTip=!1,st.beforeEach(((t,e,a)=>{gt.dispatch("onLoading",!0),console.log(gt.state.isLoading),a()})),st.afterEach(((t,e)=>{setTimeout((function(){gt.dispatch("onLoading",!1),console.log(gt.state.isLoading)}),1e3)})),new o.Z({router:st,store:gt,render:t=>t(f)}).$mount("#app")},1045:function(t,e,a){a.d(e,{b:function(){return g}});var o=a(6166),n=a.n(o);const i=n().create({headers:{"X-Requested-With":"XMLHttpRequest"},timeout:1e4});i.interceptors.response.use((function(t){return t}),(function(t){return Promise.reject(t.message)}));var s=i;function r(t,e){return s({mode:"no-cors",url:t+"blogs",method:"get",params:e})}function l(t,e){return s({url:t+"blogs/"+e,method:"get"})}function c(t,e){return s({url:t+"blogs",method:"post",data:e})}function d(t,e){return s({url:t+"blogs/"+e,method:"delete"})}function u(t,e,a){return s({url:t+"blogs/"+e,method:"put",data:a})}const g={data:()=>({domain:"https://api-placeholder.herokuapp.com/api/v1/",isLoading:!1}),methods:{callNote(t){this.isLoading&&this.$eventBus.$emit("SEND_MSG","Loading..."),this.$eventBus.$emit("SEND_MSG",t)},async GetBlogs(t={}){return this.isLoading||(this.isLoading=!0,await r(this.domain,t).then((t=>{if(200==t.status){const{data:e,pagy:a}=t.data;this.$store.commit("Blogs/UPDATE_LIST_BLOGS",e),this.$store.commit("Blogs/UPDATE_PAG",a),this.$eventBus.$emit("UPDATE_LIST_BLOGS",e),this.callNote("Loading List Blogs Success")}else this.callNote("Error");this.isLoading=!1}))),!1},async GetBlog(t=3){return this.isLoading||(this.isLoading=!0,await l(this.domain,t).then((t=>{if(200==t.status){const{data:e}=t;this.$eventBus.$emit("UPDATE_DETAIL_BLOG",e)}else this.$router.push({name:"404"});this.isLoading=!1}))),!1},async CreateBlog(t){return this.isLoading||(this.isLoading=!0,await c(this.domain,t).then((t=>{this.isLoading=!1,201==t.status?(this.GetBlogs({page:1,sort_direction:"desc",sort_by:"created_at"}),this.callNote("Create Blog Success")):alert("Error")}))),!1},async EditBlog(t,e){return this.isLoading||(this.isLoading=!0,await u(this.domain,t,e).then((t=>{this.isLoading=!1,200==t.status?(this.callNote("Edit Blog Success"),this.$eventBus.$emit("UPDATE_BLOG",t.data)):this.callNote("Error")}))),!1},async DeleteBlog(t){return this.isLoading||(this.isLoading=!0,await d(this.domain,t).then((t=>{this.isLoading=!1,204==t.status?this.GetBlogs({page:1,sort_direction:"desc",sort_by:"created_at"}):alert("Error")}))),!1}}}}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,o,n,i){if(!o){var s=1/0;for(d=0;d<t.length;d++){o=t[d][0],n=t[d][1],i=t[d][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(t){return a.O[t](o[l])}))?o.splice(l--,1):(r=!1,i<s&&(s=i));if(r){t.splice(d--,1);var c=n();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,n,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,o){return a.f[o](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+".55bf3905.js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="blogsimple:";a.l=function(o,n,i,s){if(t[o])t[o].push(n);else{var r,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==e+i){r=u;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,a.nc&&r.setAttribute("nonce",a.nc),r.setAttribute("data-webpack",e+i),r.src=o),t[o]=[n];var g=function(e,a){r.onerror=r.onload=null,clearTimeout(m);var n=t[o];if(delete t[o],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach((function(t){return t(a)})),e)return e(a)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=g.bind(null,r.onerror),r.onload=g.bind(null,r.onload),l&&document.head.appendChild(r)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.f.j=function(e,o){var n=a.o(t,e)?t[e]:void 0;if(0!==n)if(n)o.push(n[2]);else{var i=new Promise((function(a,o){n=t[e]=[a,o]}));o.push(n[2]=i);var s=a.p+a.u(e),r=new Error,l=function(o){if(a.o(t,e)&&(n=t[e],0!==n&&(t[e]=void 0),n)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;r.message="Loading chunk "+e+" failed.\n("+i+": "+s+")",r.name="ChunkLoadError",r.type=i,r.request=s,n[1](r)}};a.l(s,l,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,i,s=o[0],r=o[1],l=o[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(n in r)a.o(r,n)&&(a.m[n]=r[n]);if(l)var d=l(a)}for(e&&e(o);c<s.length;c++)i=s[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(d)},o=self["webpackChunkblogsimple"]=self["webpackChunkblogsimple"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(8991)}));o=a.O(o)})();
//# sourceMappingURL=app.f08b8e08.js.map